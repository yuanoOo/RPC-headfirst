# 有状态的计算

- flink的容错一致性保证，依赖于状态，同时依赖于数据Source支持Replay，支持replay，一致性更好设计

- flink支持状态计算，以往的流计算框架不支持状态，有一个很大的问题：
    - 以统计Pv为例，当流计算引擎宕机的时候，重启需要Replay一段消息队列中的数据，保证数据不丢失，但是这也会导致pv统计多出来一段数据，造成实时统计结果不准确。
    - 在flink中，可以利用窗口进行状态的保存，重启后重新消费，状态也还原到原来的时间点。